<!DOCTYPE html><html lang="zhCN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="_FIS_构建工具_前端工具框架"><meta name="keywords" content=",百度前端团队,FIS,百度FIS,百度前端,fis,前端模块化,前端工程,性能优化,web performance"><title>项目部署 - roadmap.path</title><meta name="author" content="fis team"><!-- Enable responsive viewport --><meta name="viewport" content="width=device-width,initial-scale=1"><link type="text/css" rel="stylesheet" href="http://fex.baidu.com/fis-site/assets/themes/fis/css/normalize_5f79cb1.css">
<link type="text/css" rel="stylesheet" href="http://fex.baidu.com/fis-site/assets/themes/fis/css/main_217d1b6.css">
<!-- Custom styles --><link type="text/css" rel="stylesheet" href="http://fex.baidu.com/fis-site/assets/themes/fis/css/style_a0a3e75.css">
<!--<link href="/assets/themes/fis/css/highlight/monokai_sublime.css" rel="stylesheet" type="text/css" media="all">--><link type="text/css" rel="stylesheet" href="http://fex.baidu.com/fis-site/assets/themes/fis/css/pygments/github_d92ecad.css">
<link type="text/css" rel="stylesheet" href="http://fex.baidu.com/fis-site/assets/themes/fis/css/perfect-scrollbar.min_0321076.css">
<link type="text/css" rel="stylesheet" href="http://fex.baidu.com/fis-site/assets/css/font-awesome.min_f37b7d7.css">
<script type="text/javascript"></script><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries --><!-- WARNING: Respond.js doesn't work if you view the page via file:// --><!--[if lt IE 9]>
    <script src="http://fex.baidu.com/fis-site/assets/themes/fis/js/html5shiv_3855464.js"></script>
    <script src="http://fex.baidu.com/fis-site/assets/themes/fis/js/respond.min_504acdd.js"></script>
    <![endif]--><!-- Fav and touch icons --><!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    --><script type="text/javascript" charset="utf-8" src="http://fex.baidu.com/fis-site/assets/themes/fis/js/jquery.min_45ac1eb.js"></script>
<script type="text/javascript" charset="utf-8" src="http://fex.baidu.com/fis-site/assets/themes/fis/js/scrollspy_f211cc4.js"></script>
</head><body><header class="navbar"><section><a href="/fis-site/index.html"><div class="logo"><i class="fa fa-cogs"></i> F.I.S - 前端工具框架</div></a><div class="nav-items"><a href="/fis-site/index.html"><div class="nav-item">首页</div></a> <a href="/fis-site/docs/beginning/getting-started.html"><div class="nav-item">使用文档</div></a> <a href="http://oak.baidu.com"><div class="nav-item">解决方案</div></a> <a target="_blank" href="http://www.imooc.com/learn/220"><div class="nav-item">在线课程</div></a> <a target="_blank" href="http://fex.baidu.com"><div class="nav-item">FEX官网</div></a></div></section></header><div id="wrap"><aside><nav class="sidebar"><ul><li class="item-category"><a href="/fis-site/docs/beginning/getting-started.html">快速入门</a></li><li class="item-sub"><a href="/fis-site/docs/beginning/getting-started.html#optimize">资源压缩</a></li><li class="item-sub"><a href="/fis-site/docs/beginning/getting-started.html#combine">资源合并</a></li><li class="item-sub"><a href="/fis-site/docs/beginning/assist.html">辅助开发</a></li><li class="item-sub"><a href="/fis-site/docs/api/cli.html">命令行</a></li><li class="item-category"><span>进阶使用</span></li><li class="item-sub"><a href="/fis-site/docs/more/fis-standard.html#资源定位">资源定位</a></li><li class="item-sub"><a href="/fis-site/docs/more/fis-standard.html#内容嵌入">内容嵌入</a></li><li class="item-sub"><a href="/fis-site/docs/more/fis-standard.html#依赖声明">依赖声明</a></li><li class="item-sub"><a href="/fis-site/docs/advance/roadmap.html">roadmap详解</a></li><li class="item-sub"><a href="/fis-site/docs/advance/modjs-solution.html">前端模块化</a></li><li class="item-sub"><a href="/fis-site/docs/advance/plugin-list.html">更多插件</a></li><li class="item-category"><a href="/fis-site/docs/dev/intro.html">二次开发</a></li><li class="item-sub"><a href="/fis-site/docs/dev/plugin.html">插件开发</a></li><li class="item-sub"><a href="/fis-site/docs/dev/solution.html">解决方案封装</a></li><li class="item-category"><a href="/fis-site/docs/dev/more.html">更多文档</a></li><li class="item-category"><a href="/fis-site/docs/api/fis-conf.html">配置API</a></li><li class="item-sub"><a href="/fis-site/docs/api/fis-conf.html">配置文件</a></li><li class="item-sub"><a href="/fis-site/docs/api/fis-conf.html#project">project</a></li><li class="item-sub"><a href="/fis-site/docs/api/fis-conf.html#modules">modules</a></li><li class="item-sub"><a href="/fis-site/docs/api/fis-conf.html#settings">settings</a></li><li class="item-sub"><a href="/fis-site/docs/api/fis-conf.html#roadmap">roadmap</a></li><li class="item-sub"><a href="/fis-site/docs/api/fis-conf.html#pack">pack</a></li><li class="item-sub"><a href="/fis-site/docs/api/fis-conf.html#deploy">deploy</a></li><li class="item-category"><a href="/fis-site/docs/api/dev.html">插件开发API</a></li><li class="item-category"><a href="/fis-sitehttps://github.com/fex-team/fis/issues/new">问题反馈</a></li><li class="item-category"><a href="/fis-sitehttps://github.com/fex-team/fis/issues?labels=faq&page=1&state=open">FAQ</a></li></ul></nav><div class="bottom-shadow"></div></aside><div class="container"><article class="doc-content"><div class="toc affix"></div><h1>项目部署</h1><p>在FIS中通过配置 <code>roadmap.path</code> 来抹平源码路径和线上路径的差异；整个FIS设计中你不需要去关心产出线上路径是什么，而只需要关心源码路径。这句话怎么理解呢，假设你源码目录是这样的；</p><div class="highlight"><pre><code class="bash language-bash" data-lang="bash">➜  tree
.
├── all.css
└── static
    └── a.css

1 directory, 2 files
</code></pre></div><p>其中<code>all.css</code>要import <code>a.css</code>；无需关心<code>a.css</code>最终会被产出到什么路径下，无需关心<code>a.css</code>是否会加<code>domain</code>、<code>md5</code>而导致无法访问到<code>a.css</code>。只需要关注源码路径；</p><p><em>all.css</em></p><div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;./static/a.css&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div><p>可能编译以后得到的结果是这样的</p><p><em>all_[md5].css</em></p><div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;http://static.baidu.com/static/release/a_2f4ef26.css&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div><p>也有可能是其他形式。</p><p>那么这一切是如何做到的？</p><p><strong>roadmap.path</strong>可以配置任意资源的产出路径。</p><p>就比如上面这个例子；只需要配置</p><p><em>fis-conf.js</em></p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;roadmap.domain&quot;</span><span class="p">,</span> <span class="s2">&quot;http://static.baidu.com&quot;</span><span class="p">);</span> <span class="c1">//配置domain</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;roadmap.path&quot;</span><span class="p">,</span> <span class="p">[{</span>
    <span class="nx">reg</span><span class="o">:</span> <span class="sr">/^\/static\/a\.css$/</span><span class="p">,</span>
    <span class="nx">release</span><span class="o">:</span> <span class="s1">&#39;/static/release/a.css&#39;</span> <span class="c1">//配置产出路径</span>
<span class="p">}]);</span>
</code></pre></div><blockquote><p>release使用reg的分组，使用$1, $2, $3 ..., $&amp;等</p></blockquote><p>有这样一个配置文件<code>fis-conf.js</code></p><p>就可以轻松修改资源的线上部署路径，也能搞定上面例子中看到的情况。</p><p>执行命令 <code>fis release -Dmd output</code>，可在<code>output</code>目录下看到产出结果。</p><div class="highlight"><pre><code class="bash language-bash" data-lang="bash">➜  tree
.
├── all.css
├── fis-conf.js
├── output
│   ├── all_4e47d46.css
│   ├── map.json <span class="c">#万能的map.json</span>
│   └── static
│       └── release
│           └── a_2f4ef26.css
└── static
    └── a.css

4 directories, 6 files
</code></pre></div><!--  --><br><strong>有任何问题，请在 <a href="https://github.com/fex-team/fis/issues">https://github.com/fex-team/fis/issues</a> 讨论</strong></article><script type="text/javascript">$("a").each(function(t,r){0===$(r).attr("href").indexOf("/")?$(r).attr("href",""+$(r).attr("href")):0!==$(r).attr("href").indexOf("#")&&$(r).attr("target","_blank")});</script><script type="text/javascript" charset="utf-8" src="http://fex.baidu.com/fis-site/assets/themes/fis/js/document_f64176c.js"></script>
</div></div><script type="text/javascript">var _bdhmProtocol="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cscript src='"+_bdhmProtocol+"hm.baidu.com/h.js%3F4206d67a3ea708c0d2a9354c8d88525f' type='text/javascript'%3E%3C/script%3E"));</script><!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) --><!-- Placed at the end of the document so the pages load faster --><script type="text/javascript" charset="utf-8" src="http://fex.baidu.com/fis-site/assets/themes/fis/js/perfect-scrollbar.min_6dcf0df.js"></script>
<script type="text/javascript">!function(){function e(e,n){var i=$('<div style="display:none;"/>').appendTo($("body"));i.html("<!--[if "+(n||"")+" IE "+(e||"")+"]><a>&nbsp;</a><![endif]-->");var o=i.find("a").length;return i.remove(),o}function n(){function e(){i||(console.log("enable"),i=!0,$(".sidebar").perfectScrollbar({wheelSpeed:10,wheelPropagation:!1}))}function n(){i&&(console.log("disable"),i=!1,$(".sidebar").perfectScrollbar("destroy"))}$(window).width()>760&&$(".sidebar").height()<$(".sidebar ul").height()?e():n()}var i=!1;e(8,"lte")||($(".sidebar").addClass("scrollbar"),n(),$(window).resize(n))}();</script></body></html>