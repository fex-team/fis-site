<!DOCTYPE html><html lang="zhCN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="_FIS_构建工具_前端工具框架"><meta name="keywords" content=",百度前端团队,FIS,百度FIS,百度前端,fis,前端模块化,前端工程,性能优化,web performance"><title>前端模块化- F.I.S</title><meta name="author" content="fis team"><!-- Enable responsive viewport --><meta name="viewport" content="width=device-width,initial-scale=1"><!-- Custom styles --><!--<link href="/assets/themes/fis/css/highlight/monokai_sublime.css" rel="stylesheet" type="text/css" media="all">--><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries --><!-- WARNING: Respond.js doesn't work if you view the page via file:// --><!--[if lt IE 9]>
    <script src="http://fis.baidu.com/assets/themes/fis/js/html5shiv_3855464.js"></script>
    <script src="http://fis.baidu.com/assets/themes/fis/js/respond.min_504acdd.js"></script>
    <![endif]--><!-- Fav and touch icons --><!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    --><link type="text/css" rel="stylesheet" href="http://fis.baidu.com/pkg/auto_combine_1_e8c8d24.css">
</head><body><header class="navbar"><section><a href="/index.html"><div class="logo"><i class="fa fa-cogs"></i> F.I.S - 前端工具框架</div></a><div class="nav-items"><a href="/index.html"><div class="nav-item">首页</div></a> <a href="/docs/beginning/getting-started.html"><div class="nav-item">使用文档</div></a> <a href="http://oak.baidu.com"><div class="nav-item">解决方案</div></a> <a target="_blank" href="http://fex.baidu.com"><div class="nav-item">FEX官网</div></a></div></section></header><div id="wrap"><aside><nav class="sidebar"><ul><li class="item-category"><a href="/docs/beginning/getting-started.html">快速入门</a></li><li class="item-sub"><a href="/docs/beginning/getting-started.html#optimize">资源压缩</a></li><li class="item-sub"><a href="/docs/beginning/getting-started.html#combine">资源合并</a></li><li class="item-sub"><a href="/docs/beginning/assist.html">辅助开发</a></li><li class="item-sub"><a href="/docs/api/cli.html">命令行</a></li><li class="item-category"><span>进阶使用</span></li><li class="item-sub"><a href="/docs/more/fis-standard.html">语言能力</a></li><li class="item-sub"><a href="/docs/advance/roadmap.html">roadmap详解</a></li><li class="item-sub"><a href="/docs/advance/modjs-solution.html">前端模块化</a></li><li class="item-sub"><a href="/docs/advance/plugin-list.html">更多插件</a></li><li class="item-category"><a href="/docs/dev/intro.html">二次开发</a></li><li class="item-sub"><a href="/docs/dev/plugin.html">插件开发</a></li><li class="item-sub"><a href="/docs/dev/solution.html">解决方案封装</a></li><li class="item-category"><a href="/docs/dev/more.html">更多文档</a></li><li class="item-category"><a href="/docs/api/fis-conf.html">配置API</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html">配置文件</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#project">project</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#modules">modules</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#settings">settings</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#roadmap">roadmap</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#pack">pack</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#deploy">deploy</a></li><li class="item-category"><a href="/docs/api/dev.html">插件开发API</a></li><li class="item-sub"><a href="/docs/api/dev.html#fisutil">fis.util</a></li><li class="item-sub"><a href="/docs/api/dev.html#fiscli">fis.cli</a></li><li class="item-sub"><a href="/docs/api/dev.html#fisfile">fis.file</a></li><li class="item-sub"><a href="/docs/api/dev.html#fisconfig">fis.config</a></li><li class="item-sub"><a href="/docs/api/dev.html#fiscompile">fis.compile</a></li><li class="item-sub"><a href="/docs/api/dev.html#fislog">fis.log</a></li><li class="item-category"><a href="https://github.com/fex-team/fis/issues/new">问题反馈</a></li><li class="item-category"><a href="https://github.com/fex-team/fis/issues?labels=faq&page=1&state=open">FAQ</a></li></ul></nav><div class="bottom-shadow"></div></aside><div class="container"><article class="doc-content"><div class="toc affix"></div><h1>前端模块化</h1><p>FIS通过插件扩展可以完美的支持模块化的前端开发方案，我们通过FIS的<a href="/docs/dev/solution.html">二次封装能力</a>，封装了一个功能完备的纯前端模块化方案<a href="https://github.com/fex-team/fis-pure">pure</a>。接下来就让我们使用<a href="https://github.com/fex-team/fis-pure">pure</a>，体验一下在FIS构建能力的支持下，如何轻松的完成一个<strong>高性能</strong>的纯前端模块化项目的构建与优化工作。</p><h2>pure安装</h2><p><a href="https://github.com/fex-team/fis-pure">pure</a>与<a href="https://github.com/fex-team/fis">fis</a>一样，使用<a href="http://npmjs.org">npm</a>包管理进行安装。pure的npm包名称为<strong>fis-pure</strong></p><div class="highlight"><pre><code class="bash language-bash" data-lang="bash"><span class="nv">$ </span>npm install -g fis-pure
<span class="nv">$ </span>pure -v
</code></pre></div><h2>示例准备</h2><p>与快速入门中的示例项目一样，我们可以使用<a href="http://lightjs.duapp.com/">Lights包管理</a>安装，也可以从<a href="https://github.com/hefangshi/fis-pure-demo">Github</a>获取。</p><div class="highlight"><pre><code class="bash language-bash" data-lang="bash"><span class="nv">$ </span>npm install -g lights <span class="c">#如果没有安装lights，请先安装</span>
<span class="nv">$ </span>lights install fis-pure-demo
</code></pre></div><p>在构建这个DEMO项目之前，我们可以先粗略的浏览一下项目情况</p><p>首先<a href="https://github.com/hefangshi/fis-pure-demo">fis-pure-demo</a>与<a href="https://github.com/hefangshi/fis-quickstart-demo">fis-quickstart-demo</a>都是一个TODO DEMO</p><p>但是对比一下可以发现，两个项目最大的区别在于fis-quickstart-demo得index.html中包含了大量的脚本和样式资源引用，而在fis-pure-demo中，我们只看到了对<a href="https://github.com/fex-team/mod">Mod</a>库的引用。</p><p><img src="http://fis.baidu.com/docs/advance/img/mod_09b36a3.png" alt="项目区别"></p><p>其次通过浏览两者的脚本文件，我们会发现fis-quickstart-demo的脚本中都添加了 <code>define</code> 包装</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">require</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">module</span><span class="p">){</span>
    <span class="c1">//content</span>
<span class="p">}</span>
</code></pre></div><p>而在fis-pure-demo中，则完全看不到 <code>define</code> 的痕迹，只有与Node.js模块化语法完全一致的 <code>require</code> 与 <code>module.exports</code>。</p><h2>发布预览</h2><p>首先我们不附加任何优化参数，进行发布预览</p><div class="highlight"><pre><code class="bash language-bash" data-lang="bash"><span class="nv">$ </span>pure release <span class="c"># pure server open可以查看构建结果</span>
<span class="nv">$ </span>pure server start <span class="c"># 如果提示端口冲突可以添加-p参数调整端口</span>
</code></pre></div><p>打开页面，我们会发现fis-pure-demo与fis-quickstart-demo一样，在页面内准确的引用了需要的脚本与样式资源。而这不同之处在于，这些资源的引用不再需要人工维护，只要使用<a href="https://github.com/fex-team/fis-pure">pure</a>进行构建工作，不需要任何配置就可以自动完成资源的加载。</p><p>当然，我们会发现所有的资源引用都是独立的，发起了大量的HTTP请求，并且随着网站复杂度的提升，这个问题也会越来越严重。可能有的同学已经想到，我们可以使用FIS的资源合并能力对当前项目进行性能优化。</p><h2>性能优化</h2><p>综合一下我们在快速入门中学到的优化命令，我们为fis-pure-demo进行资源压缩、添加md5戳、资源合并等性能优化工作</p><div class="highlight"><pre><code class="bash language-bash" data-lang="bash"><span class="nv">$ </span>pure release -pmo
</code></pre></div><p>经过简单的一个命令，我们再次刷新页面，可以看到请求数已经大幅减少，可以尝试不同的release优化参数，感受不同的优化参数带来的不同体验。</p><p>简单的几个步骤，我们就实现了模块化资源的<strong>自动加载</strong>以及完全<strong>脱离后端</strong>的资源管理能力，是不是感觉很不错呢？不妨自己写一个小DEMO体验一下静态资源自动化管理、性能优化简单可依赖的快感吧！</p><h2>了解更多</h2><p>实际上pure只是通过FIS的解决方案封装能力封装而成，其底层核心仍然是FIS，与FIS不同之处在于默认集成了一些功能扩展插件，比如用于模块化资源自动加载的<a href="https://github.com/hefangshi/fis-postpackager-autoload">fis-postpackager-autoload</a>以及静态资源自动合并插件<a href="https://github.com/hefangshi/fis-postpackager-simple">fis-postpackager-simple</a>。这些插件与配置的集成实际上都是十分简单快速的，具体可以参考<a href="/docs/dev/solution.html">解决方案封装</a>部分以及<a href="https://github.com/fex-team/fis-pure">fis-pure</a>的源码部分。如果对pure是如何实现的感兴趣，可以点击<a href="/docs/more/fis-mod.html">了解更多</a>。</p><p>FIS的优势在于灵活的定制、扩展、封装能力，并且通过内建的<a href="/docs/more/fis-standard.html">语言能力扩展</a>能力，解决了大量复杂繁重的工作，让开发插件变成一种乐趣。无论是个人使用，还是大中小各种规模的团队，都可以通过FIS满足自己的开发需求。</p><p>pure与Require.js、Sea.js等模块化方案相比，拥有同步加载脚本资源的能力，首屏渲染时间更短。并且资源打包无需依赖后端Combo服务等外部依赖。但是作为纯前端解决方案，必然也有其局限性，pure不支持类似母版页的技术，每个页面文件均需要是完整的网页，即需要包含完整的head、body元素。如果希望支持后端模板组件化能力，可以<a href="/docs/dev/more.html#solution">点击这里</a>了解更多的基于FIS的模块化解决方案。</p><!-- 多说评论框 start --><div class="ds-thread" data-thread-key="" data-title="前端模块化- F.I.S" data-url="/docs/advance/modjs-solution.html"></div><!-- 多说评论框 end --><!-- 多说公共JS代码 start --><!-- 多说公共JS代码 end --></article></div></div><!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) --><!-- Placed at the end of the document so the pages load faster --><script type="text/javascript" charset="utf-8" src="http://fis.baidu.com/pkg/auto_combine_0_30c4df7.js"></script>
<script type="text/javascript">!function(){var i=window.location.href;-1!==i.indexOf("http://fex.baidu.com/fis-site")&&(window.location.href=i.replace("http://fex.baidu.com/fis-site","http://fis.baidu.com"))}();</script><script type="text/javascript">var duoshuoQuery={short_name:"fis-site"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();</script><script type="text/javascript">$("a").each(function(t,r){0===$(r).attr("href").indexOf("/")?$(r).attr("href",""+$(r).attr("href")):0!==$(r).attr("href").indexOf("#")&&$(r).attr("target","_blank")});</script><script type="text/javascript">!function(){function e(e,n){var i=$('<div style="display:none;"/>').appendTo($("body"));i.html("<!--[if "+(n||"")+" IE "+(e||"")+"]><a>&nbsp;</a><![endif]-->");var o=i.find("a").length;return i.remove(),o}function n(){function e(){i||(console.log("enable"),i=!0,$(".sidebar").perfectScrollbar({wheelSpeed:10,wheelPropagation:!1}))}function n(){i&&(console.log("disable"),i=!1,$(".sidebar").perfectScrollbar("destroy"))}$(window).width()>760&&$(".sidebar").height()<$(".sidebar ul").height()?e():n()}var i=!1;e(8,"lte")||($(".sidebar").addClass("scrollbar"),n(),$(window).resize(n))}();</script></body></html>