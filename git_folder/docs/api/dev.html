<!DOCTYPE html><html lang="zhCN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="_FIS_构建工具_前端工具框架"><meta name="keywords" content=",百度前端团队,FIS,百度FIS,百度前端,fis,前端模块化,前端工程,性能优化,web performance"><title>插件开发API</title><meta name="author" content="fis team"><!-- Enable responsive viewport --><meta name="viewport" content="width=device-width,initial-scale=1"><!-- Custom styles --><!--<link href="/assets/themes/fis/css/highlight/monokai_sublime.css" rel="stylesheet" type="text/css" media="all">--><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries --><!-- WARNING: Respond.js doesn't work if you view the page via file:// --><!--[if lt IE 9]>
    <script src="http://127.0.0.1:8080/assets/themes/fis/js/html5shiv_3855464.js"></script>
    <script src="http://127.0.0.1:8080/assets/themes/fis/js/respond.min_504acdd.js"></script>
    <![endif]--><!-- Fav and touch icons --><!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    --><link type="text/css" rel="stylesheet" href="http://127.0.0.1:8080/pkg/auto_combine_1_54ecba7.css"></head><body><header class="navbar"><section><a href="/index.html"><div class="logo"><i class="fa fa-cogs"></i> F.I.S - 前端工具框架</div></a><div class="nav-items"><a href="/index.html"><div class="nav-item">首页</div></a> <a href="/docs/beginning/getting-started.html"><div class="nav-item">使用文档</div></a> <a href="http://oak.baidu.com"><div class="nav-item">解决方案</div></a> <a target="_blank" href="http://fex.baidu.com"><div class="nav-item">FEX官网</div></a></div></section></header><div id="wrap"><aside><nav class="sidebar"><ul><li class="item-category"><a href="/docs/beginning/getting-started.html">快速入门</a></li><li class="item-sub"><a href="/docs/beginning/getting-started.html#optimize">资源压缩</a></li><li class="item-sub"><a href="/docs/beginning/getting-started.html#combine">资源合并</a></li><li class="item-sub"><a href="/docs/beginning/assist.html">辅助开发</a></li><li class="item-sub"><a href="/docs/api/cli.html">命令行</a></li><li class="item-category"><span>进阶使用</span></li><li class="item-sub"><a href="/docs/more/fis-standard.html">语言能力</a></li><li class="item-sub"><a href="/docs/advance/roadmap.html">roadmap详解</a></li><li class="item-sub"><a href="/docs/advance/modjs-solution.html">前端模块化</a></li><li class="item-sub"><a href="/docs/advance/plugin-list.html">更多插件</a></li><li class="item-category"><a href="/docs/dev/intro.html">二次开发</a></li><li class="item-sub"><a href="/docs/dev/plugin.html">插件开发</a></li><li class="item-sub"><a href="/docs/dev/solution.html">解决方案封装</a></li><li class="item-category"><a href="/docs/dev/more.html">更多文档</a></li><li class="item-category"><a href="/docs/api/fis-conf.html">配置API</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html">配置文件</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#project">project</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#modules">modules</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#settings">settings</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#roadmap">roadmap</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#pack">pack</a></li><li class="item-sub"><a href="/docs/api/fis-conf.html#deploy">deploy</a></li><li class="item-category"><a href="/docs/api/dev.html">插件开发API</a></li><li class="item-sub"><a href="/docs/api/dev.html#fisutil">fis.util</a></li><li class="item-sub"><a href="/docs/api/dev.html#fiscli">fis.cli</a></li><li class="item-sub"><a href="/docs/api/dev.html#fisfile">fis.file</a></li><li class="item-sub"><a href="/docs/api/dev.html#fisconfig">fis.config</a></li><li class="item-sub"><a href="/docs/api/dev.html#fiscompile">fis.compile</a></li><li class="item-sub"><a href="/docs/api/dev.html#fislog">fis.log</a></li><li class="item-category"><a href="https://github.com/fex-team/fis/issues/new">问题反馈</a></li><li class="item-category"><a href="https://github.com/fex-team/fis/issues?labels=faq&page=1&state=open">FAQ</a></li></ul></nav><div class="bottom-shadow"></div></aside><div class="container"><article class="doc-content"><div class="toc affix"></div><h1>插件开发API</h1><p>插件开发中需要用到的一些接口。</p><blockquote><p>如果说明还是不够清晰，nodejs里面查看方法最好最容易的方法就是require这个包，并<code>console.log</code>出来。这样就可以一个一个尝试效果。</p><blockquote><p>#打开node交互命令行。<br>$ node<br>&gt; var fis = require(&quot;fis&quot;);<br>&gt; console.log(fis.file);</p></blockquote></blockquote><h2>Object-Oriented</h2><p>FIS在OO这块扩展了Object，给其添加了一个派生方法<code>Object.derive</code>。细节就不说了，直接来看使用。</p><p>定义一个Object</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Foo</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">derive</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//constructor</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="c1">//extend</span>
<span class="p">});</span>
</code></pre></div><p>使用Object</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">();</span>
</code></pre></div><h2>fis.util</h2><p><code>fis.util</code>包含了很多有用的工具方法，比如转码、读取文件、map等。</p><h3>is(source, type)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;fis&#39;</span><span class="p">,</span> <span class="s1">&#39;String&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>
</code></pre></div><h3>map(obj, callback)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39; =&gt; &#39;</span> <span class="o">+</span> <span class="nx">value</span><span class="p">);</span>
<span class="p">})</span>
<span class="c1">// =&gt; </span>
<span class="c1">//  0 =&gt; 1 </span>
<span class="c1">//  1 =&gt; 2 </span>
<span class="c1">//  2 =&gt; 3</span>
</code></pre></div><h3>pad(str, len, fill, pre)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">pad</span><span class="p">(</span><span class="s1">&#39;aaa&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; aaa..</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">pad</span><span class="p">(</span><span class="s1">&#39;aaa&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="c1">// =&gt; ..aaa</span>
</code></pre></div><h3>merge(source, target)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">key</span><span class="o">:</span> <span class="s1">&#39;value&#39;</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">key1</span><span class="o">:</span> <span class="s1">&#39;value1&#39;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">ab</span> <span class="o">=</span> <span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
<span class="c1">// =&gt; {key: &#39;value&#39;, key1: &#39;value1&#39;}</span>
</code></pre></div><h3>clone(source)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span> <span class="s1">&#39;string&#39;</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">,</span> <span class="s1">&#39;a != b&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; AssertionError: a != b</span>
</code></pre></div><h3>escapeReg(str)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">escapeReg</span><span class="p">(</span><span class="s1">&#39;/home/fis/a.js&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; \\/home\\/fis\\/a\\.js</span>
</code></pre></div><h3>escapeShellCmd(str)</h3><h3>escapeShellArg(str)</h3><h3>stringQuote(str, quotes)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">stringQuote</span><span class="p">(</span><span class="s1">&#39;&quot;fis&quot;&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; { origin: &#39;&quot;fis&quot;&#39;, rest: &#39;fis&#39;, quote: &#39;&quot;&#39; }</span>
</code></pre></div><h3>getMimeType(ext)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">getMimeType</span><span class="p">(</span><span class="s1">&#39;png&#39;</span><span class="p">)</span>
<span class="c1">// =&gt; image/png</span>
</code></pre></div><h3>realpath(path)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="c1">//cwd: /home/fis</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">realpath</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; /home</span>
</code></pre></div><h3>realpathSafe(path)</h3><p>@see realpath，当目录或文件不存在时，不返回false，直接返回传入路径</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="c1">//cwd: /home/fis</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">realpathSafe</span><span class="p">(</span><span class="s1">&#39;../a.js&#39;</span><span class="p">);</span>
<span class="c1">///home/a.js不存在</span>
<span class="c1">// =&gt; ../a.js</span>
</code></pre></div><h3>isAbsolute(path)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">isAbsolute</span><span class="p">(</span><span class="s1">&#39;/usr/&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">isAbsolute</span><span class="p">(</span><span class="s1">&#39;/usr&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">isAbsolute</span><span class="p">(</span><span class="s1">&#39;usr/&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>
</code></pre></div><h3>isFile(path)</h3><h3>isDir(path)</h3><h3>mtime(path)</h3><h3>touch(path, mtime)</h3><h3>isWin()</h3><h3>isTextFile()</h3><h3>isImageFile()</h3><h3>md5(data, len)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">md5</span><span class="p">(</span><span class="s1">&#39;fis&#39;</span><span class="p">);</span> <span class="c1">//不设定len，默认7个。最长32个</span>
<span class="c1">// =&gt; 37ab815</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">md5</span><span class="p">(</span><span class="s1">&#39;fis&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">);</span>
<span class="c1">// =&gt; 37ab815c056b5c5f600f6ac93e486a78</span>
</code></pre></div><h3>base64(data)</h3><h3>mkdir(path, mode)</h3><h3>toEncoding(str, encoding)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">toEncoding</span><span class="p">(</span><span class="s1">&#39;中文&#39;</span><span class="p">,</span> <span class="s1">&#39;gbk&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; &lt;Buffer d6 d0 ce c4&gt;</span>
</code></pre></div><h3>isUtf8(bytes)</h3><h3>readBuffer(buffer)</h3><h3>read(path, convert)</h3><h3>write(path, data, charset, append)</h3><h3>find(rPath, include, exclude)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;/home/fis&#39;</span><span class="p">,</span> <span class="sr">/.*\.js/</span><span class="p">);</span> <span class="c1">// all javascript file</span>
<span class="c1">// =&gt; [...]</span>
</code></pre></div><h3>del(rPath, include, exclude)</h3><h3>copy(rSource, target, include, exclude)</h3><h3>ext(str)</h3><h3>query(str)</h3><h3>pathinfo(path)</h3><h2>fis.config</h2><p><code>fis.config</code>提供了一个比较灵活的设置配置的方式。在<code>fis-conf.js</code>里面进行配置都可以在插件中拿到。</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">e</span><span class="o">:</span><span class="s1">&#39;0&#39;</span><span class="p">});</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; {b:{c:{e:&#39;0&#39;}}}</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;a.b&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; {c:{e:&#39;0&#39;}}</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">);</span>
<span class="c1">// =&gt; {e:&#39;0&#39;}</span>
</code></pre></div><h3>fis.config.merge(obj)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">merge</span><span class="p">({</span>
    <span class="nx">namespace</span><span class="o">:</span> <span class="s1">&#39;demo&#39;</span>
<span class="p">});</span>
</code></pre></div><h3>fis.config.set(key, def)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;namespace&#39;</span><span class="p">,</span> <span class="s1">&#39;demo&#39;</span><span class="p">);</span>
</code></pre></div><h3>fis.config.get(key)</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span> <span class="c1">//获取全部的配置信息</span>
<span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;namespace&#39;</span><span class="p">)</span> <span class="c1">//获取namespace</span>
</code></pre></div><h2>fis.project</h2><h3>getProjectPath()</h3><p>获得项目路径</p><h3>setProjectRoot(rPath)</h3><p>设置项目路径</p><h2>fis.file</h2><p><code>fis.file</code>是一个比较主要的类型，每一个文件进入fis处理都会指向一个fis.file对象。可以获取文件的各种信息。比如修改事件、后缀、是否是文本、图片亦或是产出路径等等。</p><h3>wrap()</h3><p>实例化一个file对象</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fis</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">wrap</span><span class="p">(</span><span class="s1">&#39;/home/fis/debug/static/demo.js&#39;</span><span class="p">);</span>
</code></pre></div><h3>Object file</h3><h4>isHtmlLike</h4><p>是否是类HTML文件，比如tpl</p><h4>isJsLike</h4><p>是否是类JS文件，比如coffeescript</p><h4>isCssLike</h4><p>是否是类CSS文件，比如less、sass</p><h4>requires</h4><p>文件依赖的id列表</p><h4>extras</h4><p>文件额外属性</p><h4>useMap</h4><p>是否记录到map.json</p><h4>isMod</h4><p>是否需要组件化</p><h4>exists()</h4><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">file</span><span class="p">.</span><span class="nx">exists</span><span class="p">();</span>
<span class="c1">// =&gt; true or false</span>
</code></pre></div><h4>isText()</h4><p>是否为一文本文件</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">file</span><span class="p">.</span><span class="nx">isText</span><span class="p">();</span>
<span class="c1">// =&gt; true or false</span>
</code></pre></div><h4>isImage()</h4><p>是否为一个图像文件</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">file</span><span class="p">.</span><span class="nx">isImage</span><span class="p">();</span>
<span class="c1">// =&gt; true or false</span>
</code></pre></div><h4>toString()</h4><p>file的真实路径</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">file</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
<span class="c1">// =&gt; /home/fis/debug/static/demo.js</span>
</code></pre></div><h4>getMtime()</h4><p>获取文件最后修改时间</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">mtime</span> <span class="o">=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">getMtime</span><span class="p">();</span>
</code></pre></div><h4>setContent(c)</h4><p>设置文件内容</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">file</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">);</span>
</code></pre></div><h4>getContent()</h4><p>获取文件内容</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">getContent</span><span class="p">();</span>
</code></pre></div><h4>getHash()</h4><p>获取文件内容hash</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">hash</span> <span class="o">=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">getHash</span><span class="p">();</span>
</code></pre></div><h4>getBase64(prefix)</h4><p>获取文件的base64</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">base64</span> <span class="o">=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">getBase64</span><span class="p">();</span>
</code></pre></div><h4>getId()</h4><p>获取文件对应的ID</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">getId</span><span class="p">();</span>
</code></pre></div><h4>getUrl(withHash, withDomain)</h4><p>获取文件的url</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">file</span><span class="p">.</span><span class="nx">getUrl</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div><h4>addRequire(id)</h4><p>给文件添加依赖</p><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">file</span><span class="p">.</span><span class="nx">addRequire</span><span class="p">(</span><span class="s1">&#39;a.js&#39;</span><span class="p">);</span>
<span class="c1">// demo.js </span>
<span class="c1">//依赖与a.js</span>
</code></pre></div><h4>removeRequire(id)</h4><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">file</span><span class="p">.</span><span class="nx">removeRequire</span><span class="p">(</span><span class="s1">&#39;a.js&#39;</span><span class="p">);</span>
<span class="c1">// 移除对a.js的依赖</span>
</code></pre></div><h2>fis.compile</h2><h2>fis.log</h2><p>打印log，适合调试报错等</p><h3>debug</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;debugMessage&#39;</span><span class="p">);</span>
<span class="c1">// [DEBUG] 18:49:46.0958 debugMessage</span>
</code></pre></div><h3>notice</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">notice</span><span class="p">(</span><span class="s1">&#39;noticeMessage&#39;</span><span class="p">);</span>
<span class="c1">// [NOTICE] 18:49:46.0958 noticeMessage</span>
</code></pre></div><h3>warning</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s1">&#39;warningMessage&#39;</span><span class="p">);</span>
<span class="c1">// [WARNING] 18:49:46.0958 warningMessage</span>
</code></pre></div><h3>error</h3><div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;errorMessage&#39;</span><span class="p">);</span>
<span class="c1">// [ERROR] 18:49:46.0958 errorMessage</span>
<span class="c1">// 编译中断</span>
</code></pre></div><!-- 多说评论框 start --><div class="ds-thread" data-thread-key="" data-title="插件开发API" data-url="/docs/api/dev.html"></div><!-- 多说评论框 end --><!-- 多说公共JS代码 start --><!-- 多说公共JS代码 end --></article></div></div><!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) --><!-- Placed at the end of the document so the pages load faster --><script type="text/javascript" charset="utf-8" src="http://127.0.0.1:8080/pkg/auto_combine_0_30c4df7.js"></script><script type="text/javascript">!function(){var i=window.location.href;-1!==i.indexOf("http://fex.baidu.com/fis-site")&&(window.location.href=i.replace("http://fex.baidu.com/fis-site","http://fis.baidu.com"))}();</script><script type="text/javascript">var duoshuoQuery={short_name:"fis-site"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();</script><script type="text/javascript">$("a").each(function(t,r){0===$(r).attr("href").indexOf("/")?$(r).attr("href",""+$(r).attr("href")):0!==$(r).attr("href").indexOf("#")&&$(r).attr("target","_blank")});</script><script type="text/javascript">!function(){function e(e,n){var i=$('<div style="display:none;"/>').appendTo($("body"));i.html("<!--[if "+(n||"")+" IE "+(e||"")+"]><a>&nbsp;</a><![endif]-->");var o=i.find("a").length;return i.remove(),o}function n(){function e(){i||(console.log("enable"),i=!0,$(".sidebar").perfectScrollbar({wheelSpeed:10,wheelPropagation:!1}))}function n(){i&&(console.log("disable"),i=!1,$(".sidebar").perfectScrollbar("destroy"))}$(window).width()>760&&$(".sidebar").height()<$(".sidebar ul").height()?e():n()}var i=!1;e(8,"lte")||($(".sidebar").addClass("scrollbar"),n(),$(window).resize(n))}();</script></body></html>